<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.5f81339daa9828444137.css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-191cc9f50f3b76b9617cb383f19acb7d.woff2) format("woff2"),url(/static/montserrat-latin-100-370318464551d5f25b0f0a78f374faac.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-bdeaeb79db315697bd173a55b097dc18.woff2) format("woff2"),url(/static/montserrat-latin-100italic-ecf7d49386e8f265878e735db34a7c4b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-85d5ef9db7f2dc6979172a4a3b2c57cb.woff2) format("woff2"),url(/static/montserrat-latin-200-1fc98e126a3d152549240e6244d7e669.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-49095760a498d024fe1a85a078850df9.woff2) format("woff2"),url(/static/montserrat-latin-200italic-fe46cf8b9462c820457d3bf537e4057f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-7c3daf12b706645b5d3710f863a4da04.woff2) format("woff2"),url(/static/montserrat-latin-300-8dc95fab9cf98d02ca8d76e97d3dff60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-f20b178ca2024a5eac8e42e6649db86c.woff2) format("woff2"),url(/static/montserrat-latin-300italic-3fe16939288856e8e828fa2661bf2354.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2"),url(/static/montserrat-latin-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-5cad650422a7184467af5a4d17b264c4.woff2) format("woff2"),url(/static/montserrat-latin-400italic-d191f22af3bb50902b99ac577f81a322.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-92d16e458625f4d2c8940f6bdca0ff09.woff2) format("woff2"),url(/static/montserrat-latin-500-8b763220218ffc11c57c84ddb80e7b26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-47bfcca6b69d6a9acca7a8bff17193e2.woff2) format("woff2"),url(/static/montserrat-latin-500italic-72c01f753c3940c0b9cb6bf2389caddf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-6fb1b5623e528e27c18658fecf5ee0ee.woff2) format("woff2"),url(/static/montserrat-latin-600-7c839d15a6f54e7025ba8c0c4b333e8f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-60789af1c9338ed1a9546722ec54b4f7.woff2) format("woff2"),url(/static/montserrat-latin-600italic-f3d4de8d0afb19e777c79032ce828e3d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2"),url(/static/montserrat-latin-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-ba136d97b14e82284dd595e257f11c47.woff2) format("woff2"),url(/static/montserrat-latin-700italic-8c98142b425630821139c24bd1698700.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-b7018be9ed6cd94da8b6675b3a468c3b.woff2) format("woff2"),url(/static/montserrat-latin-800-9a9befcf50d64f9d2d19d8b1d1984add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-540ffdd223d1a9ad3d4e678e1a23372e.woff2) format("woff2"),url(/static/montserrat-latin-800italic-897086f99f4e1f45e6b1e9368527d0bc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-58cd789700850375b834e8b6776002eb.woff2) format("woff2"),url(/static/montserrat-latin-900-26d42c9428780e545a540bbb50c84bce.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-451157bc8861fe54f523b3669a3def71.woff2) format("woff2"),url(/static/montserrat-latin-900italic-a8ec4957e1c24f5793305763ad9845b3.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}</style><meta name="generator" content="Gatsby 2.15.34"/><title data-react-helmet="true">C++ Reflection | Austin Brunkhorst</title><meta data-react-helmet="true" name="description" content="Back in September ( 2015 ), I did a little write-up on my experiences and approach to building a complete reflection pipeline in C++. At…"/><meta data-react-helmet="true" property="og:title" content="C++ Reflection"/><meta data-react-helmet="true" property="og:description" content="Back in September ( 2015 ), I did a little write-up on my experiences and approach to building a complete reflection pipeline in C++. At…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Austin Brunkhorst"/><meta data-react-helmet="true" name="twitter:title" content="C++ Reflection"/><meta data-react-helmet="true" name="twitter:description" content="Back in September ( 2015 ), I did a little write-up on my experiences and approach to building a complete reflection pipeline in C++. At…"/><link as="script" rel="preload" href="/component---node-modules-gatsby-theme-blog-src-templates-post-js-ee0f900f98124f99a54e.js"/><link as="script" rel="preload" href="/styles-8b3e33412fe850d8afd9.js"/><link as="script" rel="preload" href="/app-925a71df7e90c42f5661.js"/><link as="script" rel="preload" href="/commons-1a64df288f7003425405.js"/><link as="script" rel="preload" href="/webpack-runtime-51c8013f4bcfbd240f30.js"/><link as="fetch" rel="preload" href="/page-data/cpp-reflection-part-1/page-data.json" crossorigin="anonymous"/></head><body><script>
(function() {
  try {
    var mode = localStorage.getItem('theme-ui-color-mode');
    if (!mode) return
    document.body.classList.add('theme-ui-' + mode);
  } catch (e) {}
})();
</script><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><style data-emotion-css="r3sdtr">body{color:#232129;background-color:#fff;}body.theme-ui-dark{color:rgba(255,255,255,0.86);background-color:#232129;}</style><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><style data-emotion-css="xx5y7q">.css-xx5y7q{font-family:"Merriweather","Georgia","serif";font-size:16px;font-weight:400;line-height:1.75;}</style><div class="css-xx5y7q"><header><style data-emotion-css="nvo7eq">.css-nvo7eq{max-width:672px;margin-left:auto;margin-right:auto;padding-left:28px;padding-right:28px;padding-top:56px;}</style><div class="css-nvo7eq"><style data-emotion-css="1ixg8nk">.css-1ixg8nk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;margin-bottom:56px;}</style><div class="css-1ixg8nk"><style data-emotion-css="1qd1r5f">.css-1qd1r5f{margin-top:0;margin-bottom:0;}</style><style data-emotion-css="9ngr65">.css-9ngr65{padding:0;margin:0;margin-bottom:28px;font-size:23.08319849451542px;font-family:Montserrat,sans-serif;line-height:1.1;font-weight:900;margin-top:0;margin-bottom:0;}</style><p class="css-9ngr65"><style data-emotion-css="18sz94g">.css-18sz94g{box-shadow:none;-webkit-text-decoration:none;text-decoration:none;color:#663399;}</style><style data-emotion-css="1pgm7b3">.css-1pgm7b3{color:#663399;box-shadow:none;-webkit-text-decoration:none;text-decoration:none;color:#663399;}</style><a class="css-1pgm7b3" href="/">Austin Brunkhorst</a></p><style data-emotion-css="1qzfsby">.css-1qzfsby{background-color:black;}</style><style data-emotion-css="1qdzyq5">.css-1qdzyq5{background-color:#663399;background-color:black;}</style><div class="css-1qdzyq5" style="position:relative;display:inline-block;text-align:left;opacity:1;direction:ltr;border-radius:12px;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s;touch-action:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none"><div class="react-switch-bg" style="height:24px;width:48px;margin:0;position:relative;background:#000000;border-radius:12px;cursor:pointer;-webkit-transition:background 0.25s;-moz-transition:background 0.25s;transition:background 0.25s"><div style="height:24px;width:25px;position:relative;opacity:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><style data-emotion-css="cpnst2">.css-cpnst2{pointer-events:none;margin:4px;}</style><img alt="moon indicating dark mode" src="data:image/png;base64,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" width="16" height="16" role="presentation" class="css-cpnst2"/></div><div style="height:24px;width:25px;position:absolute;opacity:1;right:0;top:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><img alt="sun indicating light mode" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAABwNJREFUWAmtV1tsFFUY/s6Z2d22zLYlZakUCRVaQcqlWIiCiS1gTEB9UAO+GR9En3iQGI0xJiSiRB98MjEq8cEQTSBeHhQM0V7whtEGDWC90BYitxahtNtu25058/v/ZzvLbilawJNM5+yZ89+//1LgJhYRNLW1uDfBAvpGiIk2O5auvfFxqIH3ZJ8/u06GN6Z9+wVl5SjcD1IbZa/UPkPyYl2uR4dreoD2bnbYxTlBBRytkHXtAREphP5KuH4lddx9h70yxX05t7yYXwGb6W8nx1jibpl2rFlGBxcG9M18okOrn7Bnk/BAO/4bI0UeEE1zjBp3UmvjOxJXJdaKN/ZiIu4tOZrAb4aTdZAZArKmWeiiJZ6jt5tiagdCS9+6cgO1Ne6Mvhe+ixTIfyDVhipnK9p+P0Edqx9RW/YZtQVGmOLChRxNNlyPsTEgPQKMB3dbEHa0h1awYmQ83enTd2vmUtvKd1Glv2RkzBb+kZGRrKtjzG60Wguhd/lJZBingbcfWWe72vjT75bJDrhYtvA0hrurETDr5HyF2Knb1MM4ab//xIoOqueA0edRnkkinTyJdYvqLFDZO4zUPFCvVoDjJq4T7TE61IWh4x5KqxX5KVKkX8WZ/t2ov2cb3MHt4dhIyOxIJxJOOF6xRx/99BksXLoecWcXytILMNBDqKpnGZWPquYfPxY8iXGR9fK+SgFrgcRPXPjVqhehL+3EmZ5RGJQi1QBU8TPThQnOQzm+5UXGIcetUeEAfP13VwzpI+w1jGJWdSliNfvVhiMPiOsllJag4M/UGHiqM6dlBb2OTLKHHV6KkvogrJ4XhBWniWK/Gp1MQyf93FOeUXKmKk/FzJxbQtKLjFXYT4USupy8fQVir2ynVEBiZMG0qtOHMS/AW4Gwrk7BG3C1F0B5nqNKE0CME4MfVRLPnXkBKe+ipvoFhNQywOhdghvLi0F8ReyVXV4BKTBRbbe5f64zR/DHsdZw1hJfeWlHl/GNRJzDxrd5m192z78TMaVnKELZoINZS4BzQ7vtnZljSnha/pPCbkuxzXcupYwI5tIeCpGc0Yp9tWHZQy/rmYhRfNgg4bHJBYLzGkxsRJF4XKlE2jBOHNSv3kY7Tj6vthzPFl61BrYwqFlmEQhtSVXmLiksxLmtRgYXI1ULU61JJ4eVKmG3/5sCVgpbMT6OMJ2E08/29Xf3w6v4FnHdCjfWgXu/O8Z5mLdCkeRs2khHe1DqOtQwbHWTAnM5S2HNmhALYo5KjkPFrMMKjZl6HxhWIAb0BqE+/73GrBRQUsKYiBu4JX8ycI6wtw+i5ef3NZpsrKVSHYCP37jwGDgeE1SA0S/xtl5SU2fs1ApEp0qTLVRjgyycDSsLHMSwmFltZMStR3uLLg6BdLhDa5dC6ryU2pHBe1BVO9tUcwfitJt2CLJZUHoG6T7Op75u0IyK31TCPcwFqgPk/KCaD3dFOuZBCO7xvCT/j048b3I3c7F2+WuOW7qdgkucFYlcQ4qop3yzTX7WaKfOCccye3Ts1Etq0+a/BHCF1yPgF3tAUkR6OrtGmo6gl94qqcXKh3rDyrOkPa58URoWcov2Mo6M+0QjrqKB+b7++oMa9Sz+ZkM0mie6aAtnGUvhmxaI+TogPOSQedgWioGSHFLn3v4kLh4HRspNmOGv41k+55siLFp2z6xYeJjhljFcbmxJlr4ga06TbevSByz/glQq4BJx46/c+237PbBqEYKxX3HpmKZEnQnr65X20hqJYaNcLoFOLiJk2LuBbyg7Q0OEn+hm0P3honxFD6rdxYorKpeIoi4YSSvyQHQIbM5t4+YNxLj/OxhVOOE4585qGpjnq+wSx6Q9CtNxTjd5klB+g6Mv36r0+b9cZFi44WYkHdG2ZWb3TtOUOXyVAlKlpGvJIAJ3eBMyfYS5C0qRZGtC85j+4sOasDe9xznPYezhhO/2Q6eP2fSOvYHOjtuQ1a9Q1VKynVDaMc8E0tptdxUsTFpFIYjcZKcbnoaQTNdiqCwNlL4G7oziSqGnT1ALf34vhk4R5zU3qYV9ONp9K88RtouShE68JwaU8dFw5W617shWa9ykeaBIn2hcsvPgL00k45QdTCZuSVcTRNs+8fnyLvooQfR5iujAnR9bxfY2xOVOxFS8SK3Le0l48VyYu1M8HRe5JD8wKPTjYnifaK3Wfn/GChYQ8ZAi6WRzWgqLV5YrsVLnZaVSoXU1g9gOIDwFySiGi+Zdrnzr7J3r+SMuszlcQCRn8lNGcTuSy2jOI7o9mxjZo+vR3ej3tN+ifRSOyUTS0+VMOid93cCubeiy/6TImS0QxRSCq2vxKr45zV+FQnjWH6D2xg+E9EatLcLAdHTgtGGD80D6jM0+aOl4wJgO/f96R2aJKCQ3yvgftRhdFMOpd6oAAAAASUVORK5CYII=" width="16" height="16" role="presentation" class="css-cpnst2"/></div></div><div class="react-switch-handle" style="height:24px;width:24px;background:#ffffff;display:inline-block;cursor:pointer;border-radius:50%;position:absolute;transform:translateX(0px);top:0;outline:0;box-shadow:inset 0 0 0 1px #000;border:0;-webkit-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;-moz-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s"></div><input type="checkbox" role="switch" style="border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px" aria-label="Toggle dark mode"/></div></div></div></header><div><style data-emotion-css="1ewmu01">.css-1ewmu01{max-width:672px;margin-left:auto;margin-right:auto;padding-left:28px;padding-right:28px;padding-top:56px;padding-bottom:56px;}</style><div class="css-1ewmu01"><main><style data-emotion-css="11b9pc1">.css-11b9pc1{padding:0;margin:0;margin-bottom:28px;font-size:40px;font-family:Montserrat,sans-serif;line-height:1.1;font-weight:900;}</style><h1 class="css-11b9pc1">C++ Reflection</h1><style data-emotion-css="1qqxfhy">.css-1qqxfhy{font-size:13.32085131842997px;margin-top:-28px;margin-bottom:28px;}</style><style data-emotion-css="1m60b3c">.css-1m60b3c{padding:0;margin:0;margin-bottom:28px;font-size:13.32085131842997px;margin-top:-28px;margin-bottom:28px;}.css-1m60b3c code{font-size:inherit;}</style><p class="css-1m60b3c">June 16, 2019</p><style data-emotion-css="1mv7wyt">.css-1mv7wyt{padding:0;margin:0;margin-bottom:28px;}.css-1mv7wyt code{font-size:inherit;}</style><p class="css-1mv7wyt">Back in September (<em class="css-0">2015</em>), I did a little write-up on my experiences and approach to building a complete reflection pipeline in C++. At that time, I didn’t have a blog setup, so I just included the details in the README of the <style data-emotion-css="1pm6ghi">.css-1pm6ghi{color:#663399;}</style><a href="https://github.com/AustinBrunkhorst/CPP-Reflection" class="css-1pm6ghi">GitHub repository</a> where the code lived.</p><p class="css-1mv7wyt">I have since refactored that code and the pipeline after using it extensively on my game team. The response from the community has been great enough that I decided to start a blog in general and continue the write-ups. The rest of this post is taken directly from the README, so any references to a repository are talking about <a href="https://github.com/AustinBrunkhorst/CPP-Reflection" class="css-1pm6ghi">this</a>.</p><style data-emotion-css="hywvwq">.css-hywvwq{padding:0;margin:0;margin-bottom:28px;border:0;border-bottom:1px solid;margin-top:-1px;border-color:hsla(0,0%,0%,0.2);}</style><hr class="css-hywvwq"/><style data-emotion-css="8p5v8e">.css-8p5v8e{padding:0;margin:0;margin-bottom:28px;font-size:27.725793726205854px;font-family:Montserrat,sans-serif;line-height:1.1;font-weight:900;}</style><style data-emotion-css="zz14a6">.css-zz14a6{padding:0;margin:0;margin-bottom:28px;font-size:27.725793726205854px;font-family:Montserrat,sans-serif;line-height:1.1;font-weight:900;}.css-zz14a6 a{visibility:hidden;}.css-zz14a6:hover a{visibility:visible;}</style><h2 id="preface" class="css-zz14a6"><style data-emotion-css="1fcz27o">.css-1fcz27o{margin-left:-20px;padding-right:4px;color:#663399;}</style><a href="#preface" class="css-1fcz27o"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Preface</h2><p class="css-1mv7wyt">I set out this summer (<em class="css-0">2015</em>) to implement a flexible reflection system for the game project I’m working on. This repository contains a skeleton for parts of the system that I prototyped throughout the summer. With the proper dependencies and build system setup, you should have enough to integrate into your engine / application without much fuss.</p><h2 id="quick-intro" class="css-zz14a6"><a href="#quick-intro" class="css-1fcz27o"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Quick Intro</h2><p class="css-1mv7wyt">As a statically typed language, C++ wasn’t designed to facilitate runtime type information. Instead, it’s crazy fast and optimization friendly. Games are performance critical applications - it is for this reason that C++ is basically the standard backend.</p><p class="css-1mv7wyt">Type introspection is crucial for complex / large code bases that need to interface with tools (<em class="css-0">i.e. a game editor</em>). Unless you’re a team of all programmers (<em class="css-0">I’m sorry if that’s the case</em>) it is effectively impossible to iterate upon a larger game without some set of tools to abstract away code (<em class="css-0">especially in 3D</em>). Without type introspection, you can expect to copy and paste a lot of boilerplate code. This is <style data-emotion-css="1vg6q84">.css-1vg6q84{font-weight:700;}</style><strong class="css-1vg6q84">absurdly</strong> tedious and undesirable.</p><p class="css-1mv7wyt">The good news is that there are <em class="css-0">tons and tons</em> of great resources out there for “extending” C++ to include meta information within your code base. The most common approaches you’ll find are as follows:</p><style data-emotion-css="wf0k3i">.css-wf0k3i{padding:0;margin:0;margin-bottom:28px;list-style-position:outside;list-style-image:none;margin-left:28px;}</style><ul class="css-wf0k3i"><style data-emotion-css="ikjsr2">.css-ikjsr2{margin-bottom:14px;padding-left:0;}.css-ikjsr2 ol{margin-top:14px;margin-bottom:14px;margin-left:28px;}.css-ikjsr2 ul{margin-top:14px;margin-bottom:14px;margin-left:28px;}.css-ikjsr2 p{margin-bottom:14px;}.css-ikjsr2 code{font-size:inherit;}</style><li class="css-ikjsr2">Using macros and templates to simplify the craziness that is writing the aforementioned boilerplate code.</li><li class="css-ikjsr2">Parsing your code to <strong class="css-1vg6q84">generate</strong> the crazy boilerplate code.</li></ul><p class="css-1mv7wyt">The latter technique isn’t adopted nearly as much as the former, but feels like it’s becoming much more common. With that said, I chose to use the generation technique. I’m pretty glad I did.</p><p class="css-1mv7wyt">The purpose of this repository is to be a simple jumpstart reference for those interested in implementing the generation method in their own code base.</p><p class="css-1mv7wyt">Here are a few links that cover more specifics on the concept (<em class="css-0">specifically in the realm of C/C++</em>)</p><ul class="css-wf0k3i"><li class="css-ikjsr2"><a href="http://www.gdcvault.com/play/1020065/Physics-for-Game-Programmers-Debugging" class="css-1pm6ghi">GDC: Physics for Game Programmers - Debugging</a> (<em class="css-0">it’s relevant, I swear!</em>)</li><li class="css-ikjsr2"><a href="http://www.gdcvault.com/play/1015586/" class="css-1pm6ghi">GDC: Robustification Through Introspection and Analysis Tools (Avoiding Developer Taxes)</a></li><li class="css-ikjsr2"><a href="http://www.myopictopics.com/?p=368" class="css-1pm6ghi">Game Engine Metadata Creation with Clang</a></li><li class="css-ikjsr2"><a href="http://eli.thegreenplace.net/2011/07/03/parsing-c-in-python-with-clang/" class="css-1pm6ghi">Parsing C++ in Python with Clang</a></li></ul><h2 id="goals" class="css-zz14a6"><a href="#goals" class="css-1fcz27o"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Goals</h2><style data-emotion-css="z9wn8r">.css-z9wn8r{padding:0;margin:0;margin-bottom:28px;font-size:13.32085131842997px;font-family:Montserrat,sans-serif;line-height:1.1;font-weight:900;}</style><style data-emotion-css="1wo7h50">.css-1wo7h50{padding:0;margin:0;margin-bottom:28px;font-size:13.32085131842997px;font-family:Montserrat,sans-serif;line-height:1.1;font-weight:900;}.css-1wo7h50 a{visibility:hidden;}.css-1wo7h50:hover a{visibility:visible;}</style><h5 id="make-the-pipeline-as-hands-off-as-possible" class="css-1wo7h50"><a href="#make-the-pipeline-as-hands-off-as-possible" class="css-1fcz27o"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Make the pipeline as hands off as possible.</h5><p class="css-1mv7wyt">Specifically, you shouldn’t have to jump through a bunch of hoops just to expose your code to the reflection runtime library. Make changes to your code, recompile, and the changes are reflected immediately (<em class="css-0">yep, it was intended</em>).</p><p class="css-1mv7wyt">No extra button clicks or steps to synchronize the reflection data.</p><h5 id="provide-rich-functionality-in-the-runtime-library" class="css-1wo7h50"><a href="#provide-rich-functionality-in-the-runtime-library" class="css-1fcz27o"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Provide rich functionality in the runtime library.</h5><p class="css-1mv7wyt">If we’re going through all this trouble in the first place, might as well make it worth while!</p><h5 id="avoid-huge-build-times" class="css-1wo7h50"><a href="#avoid-huge-build-times" class="css-1fcz27o"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Avoid huge build times.</h5><p class="css-1mv7wyt">We’re effectively compiling our code twice. First to parse our code base and understand it as intricately as a compiler does, then to <em class="css-0">actually</em> compile it as per usual (<em class="css-0">with the addition of our generated source</em>).</p><p class="css-1mv7wyt">This is one of the downsides to the generation approach. Instead of manually writing these macros inline with our source, we’re using the brains of a compiler. However, we would much rather sacrifice a little bit shorter build times for the luxury of cleaner, less cluttered code.</p><p class="css-1mv7wyt">Unfortunately, this also implies creating a much less intuitive build pipeline. Don’t worry though! I have some nifty diagrams for you.</p><h2 id="pipeline" class="css-zz14a6"><a href="#pipeline" class="css-1fcz27o"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pipeline</h2><p class="css-1mv7wyt">In our engine (<em class="css-0">we call it <strong class="css-1vg6q84">Ursine Engine</strong>, because we’re dangerously clever and played on the fact that our team name is Bear King</em>), we use <a href="http://www.cmake.org/" class="css-1pm6ghi">CMake</a> for managing most aspects of the overall build pipeline. CMake is a horribly wonderful tool that I’ve come to love despite hating it at the same time. It allows us to generate solutions for most IDEs that anyone on the team likes to use, although currently, everyone is using Visual Studio 2015 (<em class="css-0">finally <strong class="css-1vg6q84">some</strong> C++14, baby!</em>).</p><p class="css-1mv7wyt">CMake makes this pipeline surprisingly simple which was a relief. I won’t go into much specific detail, but I’ll provide relevant snippets of the integration into our engine a little later when I describe the code in this repository.</p><p class="css-1mv7wyt">Here’s a diagram of the entire pipeline from writing the source, to building your game / application.</p><p class="css-1mv7wyt"><style data-emotion-css="12yi5u7">.css-12yi5u7{padding:0;margin:0;margin-bottom:28px;max-width:100%;}</style><img src="https://imgur.com/V7RLPAj.png" alt="Pipeline Diagram" class="css-12yi5u7"/></p><h2 id="code" class="css-zz14a6"><a href="#code" class="css-1fcz27o"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Code</h2><p class="css-1mv7wyt">The repository has two parts - <a href="https://github.com/AustinBrunkhorst/CPP-Reflection/tree/master/Source/Parser" class="css-1pm6ghi">Parser</a> and <a href="https://github.com/AustinBrunkhorst/CPP-Reflection/tree/master/Source/Runtime" class="css-1pm6ghi">Runtime</a>.</p><ul class="css-wf0k3i"><li class="css-ikjsr2"><strong class="css-1vg6q84">Parser</strong> is for the command line source parsing tool. (<em class="css-0">requires <a href="http://www.boost.org/users/history/version_1_59_0.html" class="css-1pm6ghi">Boost 1.59.0</a> and <a href="http://llvm.org/releases/download.html" class="css-1pm6ghi">libclang 3.7.0</a></em>)</li><li class="css-ikjsr2"><strong class="css-1vg6q84">Runtime</strong> is for the reflection runtime library.</li></ul><style data-emotion-css="dao2k3">.css-dao2k3{padding:0;margin:0;margin-bottom:28px;font-size:23.08319849451542px;font-family:Montserrat,sans-serif;line-height:1.1;font-weight:900;}</style><style data-emotion-css="1cpytza">.css-1cpytza{padding:0;margin:0;margin-bottom:28px;font-size:23.08319849451542px;font-family:Montserrat,sans-serif;line-height:1.1;font-weight:900;}.css-1cpytza a{visibility:hidden;}.css-1cpytza:hover a{visibility:visible;}</style><h3 id="cmake-prebuild-example" class="css-1cpytza"><a href="#cmake-prebuild-example" class="css-1fcz27o"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CMake Prebuild Example</h3><p class="css-1mv7wyt">This is basic example of adding the prebuild step to an existing target in CMake.</p><script src="https://gist.github.com/AustinBrunkhorst/38a3ca236238604ee32ef58d2e9c6e90.js"></script><h3 id="string-templates" class="css-1cpytza"><a href="#string-templates" class="css-1fcz27o"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>String Templates</h3><p class="css-1mv7wyt">Generating code is usually a pretty ugly process.</p><p class="css-1mv7wyt">Instead of writing the characters manually (i.e. <style data-emotion-css="1md04c2">.css-1md04c2{border-radius:0.3em;color:#1B1F23;background-color:rgba(255,229,100,0.2);padding-top:0.15em;padding-bottom:0.05em;padding-left:0.2em;padding-right:0.2em;}</style><code class="css-1md04c2">output += &quot;REGISTER_FUNCTION(&quot; + name + &quot;)&quot;</code> ), I wanted to use <em class="css-0">“String Templates”</em>. That is why I chose <a href="https://mustache.github.io/" class="css-1pm6ghi">Mustache</a>. I found a simple <a href="https://github.com/kainjow/Mustache" class="css-1pm6ghi">header only implemenation</a>, which is included in the <a href="https://github.com/AustinBrunkhorst/CPP-Reflection/blob/master/Source/Parser/Mustache.h" class="css-1pm6ghi">Parser</a> section.</p><p class="css-1mv7wyt">In the <strong class="css-1vg6q84">Generate Source Files</strong> section of the pipeline diagram, you’ll notice two steps. <em class="css-0">“Compile”</em> and <em class="css-0">“Render”</em>. Compile simply takes all of the types that we’ve extracted and <a href="https://github.com/AustinBrunkhorst/CPP-Reflection/blob/master/Source/Parser/ReflectionParser.cpp#L217-L220" class="css-1pm6ghi">compiles the data to be referenced in Mustache</a>. Render actually renders the templates and writes them to the configured output files.</p><p class="css-1mv7wyt">In the <a href="https://github.com/AustinBrunkhorst/CPP-Reflection/tree/master/Templates" class="css-1pm6ghi">Templates</a> folder of the repository, you’ll find the mustache template files referenced in the reflection parser.</p><h3 id="type-meta-data" class="css-1cpytza"><a href="#type-meta-data" class="css-1fcz27o"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type Meta Data</h3><p class="css-1mv7wyt">One of the biggest features that I wanted to implement in the runtime library is being able to add meta data to types at compile time.</p><p class="css-1mv7wyt">If you’ve ever used C#, you know they have a pretty groovy reflection system built into the language. I really like their syntax for <a href="http://www.tutorialspoint.com/csharp/csharp_attributes.htm" class="css-1pm6ghi">Attributes</a>, which is a way to add meta data to language types / constructs.</p><p class="css-1mv7wyt">The closest I could get to this style, was with the use of Macros. C++11 introduced <a href="http://en.cppreference.com/w/cpp/language/attributes" class="css-1pm6ghi">Attribute Specifiers</a> as a way to hint compilers on intended behavior or add language extensions. Unfortunately, compiler support varies widely, and as mentioned it’s only managed at compile time.</p><p class="css-1mv7wyt">Luckily for us, Clang supports the attribute <code class="css-1md04c2">annotate( )</code>. You can extract the contents of an annotation with <a href="https://github.com/AustinBrunkhorst/CPP-Reflection/blob/master/Source/Parser/MetaDataManager.cpp#L10-L17" class="css-1pm6ghi">libclang</a>.</p><p class="css-1mv7wyt">The syntax for this attribute look something like this.</p><script src="https://gist.github.com/AustinBrunkhorst/dda9ed424e1e831173c8c09edfdac426.js"></script><p class="css-1mv7wyt">You might be thinking, <em class="css-0">“But it’s only for Clang.. how will this work in MSVC?”</em></p><p class="css-1mv7wyt">More good news! libclang preprocesses source files, so we can use preprocessor directives. In the source parsing tool, I define <code class="css-1md04c2">__REFLECTION_PARSER__</code> <a href="https://github.com/AustinBrunkhorst/CPP-Reflection/blob/master/Source/Parser/Main.cpp#L126" class="css-1pm6ghi">before compiling</a>. We can use this to make a nice solution for all compilers.</p><script src="https://gist.github.com/AustinBrunkhorst/11ce4da2354f152e141a1d19fa54ca57.js"></script><p class="css-1mv7wyt">We would use it like so.</p><style data-emotion-css="4i7q13">.css-4i7q13{padding:28px;margin:0;margin-bottom:0;font-size:85%;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;color:white;background-color:#011627;overflow:auto;border-radius:10px;}.css-4i7q13 .attr-name{font-style:italic;}.css-4i7q13 .comment{color:#809393;}.css-4i7q13 .attr-name,.css-4i7q13 .string,.css-4i7q13 .url{color:#addb67;}.css-4i7q13 .variable{color:#d6deeb;}.css-4i7q13 .number{color:#f78c6c;}.css-4i7q13 .builtin,.css-4i7q13 .char,.css-4i7q13 .constant,.css-4i7q13 .function{color:#82aaff;}.css-4i7q13 .punctuation,.css-4i7q13 .selector,.css-4i7q13 .doctype{color:#c792ea;}.css-4i7q13 .class-name{color:#ffc98b;}.css-4i7q13 .tag,.css-4i7q13 .operator,.css-4i7q13 .keyword{color:#ffa7c4;}.css-4i7q13 .boolean{color:#ff5874;}.css-4i7q13 .property{color:#80cbc4;}.css-4i7q13 .namespace{color:#b2ccd6;}</style><style data-emotion-css="g6kpu7">.css-g6kpu7{font-size:inherit;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;}</style><style data-emotion-css="x16y05">.css-x16y05{padding:28px;margin:0;margin-bottom:0;font-size:85%;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;color:white;background-color:#011627;overflow:auto;border-radius:10px;font-size:inherit;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;}.css-x16y05 .attr-name{font-style:italic;}.css-x16y05 .comment{color:#809393;}.css-x16y05 .attr-name,.css-x16y05 .string,.css-x16y05 .url{color:#addb67;}.css-x16y05 .variable{color:#d6deeb;}.css-x16y05 .number{color:#f78c6c;}.css-x16y05 .builtin,.css-x16y05 .char,.css-x16y05 .constant,.css-x16y05 .function{color:#82aaff;}.css-x16y05 .punctuation,.css-x16y05 .selector,.css-x16y05 .doctype{color:#c792ea;}.css-x16y05 .class-name{color:#ffc98b;}.css-x16y05 .tag,.css-x16y05 .operator,.css-x16y05 .keyword{color:#ffa7c4;}.css-x16y05 .boolean{color:#ff5874;}.css-x16y05 .property{color:#80cbc4;}.css-x16y05 .namespace{color:#b2ccd6;}</style><pre class="prism-code language-css-g6kpu7 css-x16y05"><div class="token-line"><style data-emotion-css="1baulvz">.css-1baulvz{display:inline-block;}</style><span class="token plain css-1baulvz">Meta(Mashed)</span></div><div class="token-line"><span class="token plain css-1baulvz">int potatoes;</span></div></pre><p class="css-1mv7wyt">Now that I could annotate code, I needed to define how I would interact with it. Initially I assumed key value pairs separated by commas, like so.</p><pre class="prism-code language-css-g6kpu7 css-x16y05"><div class="token-line"><span class="token plain css-1baulvz">Meta(Key = Value, Key2, Key = &quot;Yep!&quot;)</span></div></pre><p class="css-1mv7wyt">But after reviewing this approach with my teammate <a href="http://www.jordanellis.me" class="css-1pm6ghi">Jordan</a>, he came up with the brilliant idea of doing exactly what C# does, and that is using user defined types as annotations, queryable at runtime. So I came up with this.</p><script src="https://gist.github.com/AustinBrunkhorst/e30ce39836692ae138a8afdaf884d220.js"></script><p class="css-1mv7wyt">Here’s how it works - I treat all values delimited by commas as constructors. If a value doesn’t have parentheses, it’s assumed to be a default constructor.</p><p class="css-1mv7wyt">For each constructor, I then extract the arguments provided. When I generate the source, I simply paste the extracted arguments as a constructor call of the provided type. The value is converted to a <code class="css-1md04c2">Variant</code> and accessible at runtime. This allows us to do some really awesome things.</p><script src="https://gist.github.com/AustinBrunkhorst/9f40e50eebceecb040d1b53318909909.js"></script><p class="css-1mv7wyt">One of the coolest things about this, aside from type safety, is that Visual Studio correctly syntax highlights the contents of the macro and also provides intellisense! It’s a beautiful thing. Here’s a more complete example of interfacing with it at runtime using the runtime library.</p><script src="https://gist.github.com/AustinBrunkhorst/94973cf89c572f6b007a572253a49f70.js"></script><h3 id="function-binding" class="css-1cpytza"><a href="#function-binding" class="css-1fcz27o"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Function Binding</h3><p class="css-1mv7wyt">Another notoriously difficult or convoluted process in managing reflection info in C++ is dynamically invoking functions / methods.</p><p class="css-1mv7wyt">The most common approach is to store raw function / method pointers and calculate the offsets of arguments. The result is a ton of templates and difficult to follow operations. Not to mention, I can’t imagine it’s fun to debug!</p><p class="css-1mv7wyt">In libclang, you’re able to easily extract signatures from functions. With this in mind, I came up with the most simple approach that I could think of. <strong class="css-1vg6q84">Wrapping function calls in generated lambdas</strong>.</p><p class="css-1mv7wyt">Here’s a simple demonstration of the concept.</p><script src="https://gist.github.com/AustinBrunkhorst/be5031e4c101c7051f10a5c05a72bbf1.js"></script><p class="css-1mv7wyt">In the context of our runtime library, here’s an example of something that might be generated for a class method.</p><script src="https://gist.github.com/AustinBrunkhorst/ee94408f4ab0368777a5e868627f13c8.js"></script><p class="css-1mv7wyt">That’s it! It’s much less complicated than the previously mentioned approach. This concept is also applied to fields / globals with their getters and setters.</p><p class="css-1mv7wyt">There are some downsides though:</p><ul class="css-wf0k3i"><li class="css-ikjsr2">Larger code size. For each generated lambda, the compiler has to generate a bunch of symbols behind the scenes.</li><li class="css-ikjsr2">Larger compile times.</li><li class="css-ikjsr2">Decent amount of indirection just for one function call.</li></ul><p class="css-1mv7wyt">You shouldn’t have to worry <strong class="css-1vg6q84">too</strong> much however. If like most people, you use reflection for editor functionality, not a physics simulation. Performance in most cases is not critical.</p><p class="css-1mv7wyt">Here’s a more complete example of dynamically calling functions with the runtime library.</p><script src="https://gist.github.com/AustinBrunkhorst/402f85b21539250532da613ec02bd00f.js"></script></main><style data-emotion-css="47xi18">.css-47xi18{margin-top:56px;padding-top:28px;}</style><footer class="css-47xi18"><hr class="css-hywvwq"/><style data-emotion-css="1r1aq4">.css-1r1aq4{margin-bottom:56px;}</style><style data-emotion-css="ndo0tc">.css-ndo0tc{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:56px;}</style><style data-emotion-css="1ig3dip">.css-1ig3dip{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:56px;}</style><div class="css-1ig3dip"><style data-emotion-css="11h0jpm">.css-11h0jpm{margin-right:14px;margin-bottom:0;width:48px;border-radius:99999px;}</style><div role="presentation" class="css-11h0jpm"></div><div class="css-0">Words by <a href="http://example.com/" class="css-1pm6ghi">Jane Doe</a>.<br/>Change me. This is all quite default.</div></div></footer></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/cpp-reflection-part-1";window.webpackCompilationHash="d783dd221eeedb5b0895";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-925a71df7e90c42f5661.js"],"component---node-modules-gatsby-theme-blog-src-templates-post-js":["/component---node-modules-gatsby-theme-blog-src-templates-post-js-ee0f900f98124f99a54e.js"],"component---src-pages-index-js":["/component---src-pages-index-js-a1448ad6aefef52c4862.js"]};/*]]>*/</script><script src="/webpack-runtime-51c8013f4bcfbd240f30.js" async=""></script><script src="/commons-1a64df288f7003425405.js" async=""></script><script src="/app-925a71df7e90c42f5661.js" async=""></script><script src="/styles-8b3e33412fe850d8afd9.js" async=""></script><script src="/component---node-modules-gatsby-theme-blog-src-templates-post-js-ee0f900f98124f99a54e.js" async=""></script></body></html>